Unit <Jest>:
    stage: test
    extends:
        - .cache-pull
    when: on_success
    image: node:11.10.1
    tags:
        - autoscale
    script:
        - >
            if [[ -f package.json && -f webpack.config.js && -f node_modules/jest/bin/jest.js && -f src/tests/setupTests.js ]] ; then
                if [[ -f node_modules/jest-junit/index.js ]] ; then
                    npm test -- --passWithNoTests --ci --reporters=default
                else
                    npm test -- --passWithNoTests
                fi
            else
                echo "Jest skipped."
            fi
    only:
        refs:
            - branches
    except:
        refs:
            - stable
            - bleeding
